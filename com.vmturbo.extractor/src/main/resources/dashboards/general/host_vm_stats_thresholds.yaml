annotations:
  list:
  - builtIn: 1
    datasource: -- Grafana --
    enable: true
    hide: true
    iconColor: rgba(0, 211, 255, 1)
    name: Annotations & Alerts
    type: dashboard
description: This report shows daily average utilization measurements for the selected
  time range.. Averages are grouped into two sections. One rolled up for physical
  machines and another rolled up for virtual machines. Note that all physical and
  virtual machines are included. This information is useful as a top-level assessment
  of the overall average loading of your entire environment over time.
editable: false
gnetId:
graphTooltip: 0
iteration: 1596048754801
links: []
panels:
- aliasColors: {}
  bars: false
  dashLength: 10
  dashes: false
  datasource: $DB
  description: Average utilization for physical machines over selected time period.
  fieldConfig:
    defaults:
      custom: {}
    overrides: []
  fill: 0
  fillGradient: 0
  gridPos:
    h: 9
    w: 12
    x: 0
    y: 0
  hiddenSeries: false
  id: 2
  legend:
    avg: false
    current: false
    max: false
    min: false
    show: true
    total: false
    values: false
  lines: true
  linewidth: 3
  nullPointMode: 'null'
  options:
    dataLinks: []
  percentage: false
  pointradius: 2
  points: false
  renderer: flot
  seriesOverrides: []
  spaceLength: 10
  stack: false
  steppedLine: false
  targets:
  - format: time_series
    group: []
    metricColumn: none
    rawQuery: true
    rawSql: |-
      select DATE(metric."time") as "time", metric."type" as metric, avg(utilization)
      from metric
      join entity e on
          e.type = 'PHYSICAL_MACHINE'
          and e.oid = metric.entity_oid
      where
          ($__timeFrom(),$__timeTo()) OVERLAPS (e.first_seen, e.last_seen)
          and provider_oid isnull
          and metric.time BETWEEN timestamptz $__timeFrom() AND $__timeTo()
      group by 1, 2
      order by 1
    refId: A
    select:
    - - params:
        - current
        type: column
    table: metric
    timeColumn: '"time"'
    timeColumnType: timestamp
    where:
    - name: $__timeFilter
      params: []
      type: macro
  thresholds: []
  timeFrom:
  timeRegions: []
  timeShift:
  title: Physical Infrastructure Utilization Metrics
  tooltip:
    shared: true
    sort: 2
    value_type: individual
  type: graph
  xaxis:
    buckets:
    mode: time
    name:
    show: true
    values: []
  yaxes:
  - $$hashKey: object:410
    format: percentunit
    label:
    logBase: 1
    max:
    min:
    show: true
  - $$hashKey: object:411
    format: short
    label:
    logBase: 1
    max:
    min:
    show: true
  yaxis:
    align: false
    alignLevel:
- datasource: $DB
  description: Percentage thresholds at which the color changes from Green to Yellow,
    and Yellow to Red
  fieldConfig:
    defaults:
      custom:
        align:
        width: 115
      mappings: []
      thresholds:
        mode: percentage
        steps:
        - color: green
          value:
        - color: red
          value: 80
      unit: percentunit
    overrides:
    - matcher:
        id: byName
        options: CPU
      properties:
      - id: thresholds
        value:
          mode: percentage
          steps:
          - color: green
            value:
          - color: yellow
            value: 20
          - color: red
            value: 40
      - id: custom.displayMode
        value: color-background
    - matcher:
        id: byName
        options: Mem
      properties:
      - id: custom.displayMode
        value: color-background
      - id: thresholds
        value:
          mode: percentage
          steps:
          - color: green
            value:
          - color: '#EAB839'
            value: 60
          - color: red
            value: 80
    - matcher:
        id: byName
        options: Ballooning
      properties:
      - id: custom.displayMode
        value: color-background
      - id: thresholds
        value:
          mode: percentage
          steps:
          - color: green
            value:
          - color: '#EAB839'
            value: 30
          - color: red
            value: 60
    - matcher:
        id: byName
        options: Swapping
      properties:
      - id: custom.displayMode
        value: color-background
      - id: thresholds
        value:
          mode: percentage
          steps:
          - color: green
            value:
          - color: '#EAB839'
            value: 10
          - color: red
            value: 25
    - matcher:
        id: byName
        options: IO Throughput
      properties:
      - id: custom.displayMode
        value: color-background
      - id: thresholds
        value:
          mode: percentage
          steps:
          - color: green
            value:
          - color: '#EAB839'
            value: 20
          - color: red
            value: 40
    - matcher:
        id: byName
        options: Net Throughput
      properties:
      - id: custom.displayMode
        value: color-background
      - id: thresholds
        value:
          mode: percentage
          steps:
          - color: green
            value:
          - color: '#EAB839'
            value: 20
          - color: red
            value: 40
    - matcher:
        id: byName
        options: CPU Ready Q
      properties:
      - id: custom.displayMode
        value: color-background
      - id: thresholds
        value:
          mode: percentage
          steps:
          - color: green
            value:
          - color: '#EAB839'
            value: 3
          - color: red
            value: 10
    - matcher:
        id: byName
        options: VMem
      properties:
      - id: thresholds
        value:
          mode: percentage
          steps:
          - color: green
            value:
          - color: '#EAB839'
            value: 60
          - color: red
            value: 80
      - id: custom.displayMode
        value: color-background
    - matcher:
        id: byName
        options: VCPU
      properties:
      - id: custom.displayMode
        value: color-background
      - id: thresholds
        value:
          mode: percentage
          steps:
          - color: green
            value:
          - color: '#EAB839'
            value: 20
          - color: red
            value: 40
  gridPos:
    h: 4
    w: 19
    x: 0
    y: 9
  id: 7
  options:
    showHeader: true
  pluginVersion: 7.0.1
  targets:
  - format: table
    group: []
    metricColumn: none
    rawQuery: true
    rawSql: |-
      SELECT  *
      FROM    (
              VALUES
              (.2, .6, .3, .1, .2, .2, .03, .2, .6),
              (.4, .8, .6, .25, .4, .4, .1, .4, .8)
              ) AS q ("CPU", "Mem", "Ballooning", "Swapping", "IO Throughput", "Net Throughput", "CPU Ready Q", "VCPU", "VMem")
    refId: A
    select:
    - - params:
        - execution_time
        type: column
    table: grafana
    timeColumn: '"time"'
    timeColumnType: timestamp
    where:
    - name: $__timeFilter
      params: []
      type: macro
  timeFrom:
  timeShift:
  title: Legend
  type: table
- columns: []
  datasource: -- Dashboard --
  description: Daily average for physical machines.
  fieldConfig:
    defaults:
      custom: {}
    overrides: []
  fontSize: 80%
  gridPos:
    h: 12
    w: 24
    x: 0
    y: 13
  id: 4
  pageSize:
  showHeader: true
  sort:
    col: 0
    desc: false
  styles:
  - $$hashKey: object:1199
    alias: Date
    align: ''
    dateFormat: YYYY-MM-DD
    pattern: Time
    type: date
  - $$hashKey: object:1200
    alias: ''
    align: ''
    colorMode: cell
    colors:
    - rgba(41, 168, 36, 0.97)
    - rgba(237, 129, 40, 0.89)
    - rgba(245, 54, 54, 0.9)
    dateFormat: YYYY-MM-DD HH:mm:ss
    decimals: 2
    mappingType: 1
    pattern: CPU
    thresholds:
    - 0.2
    - 0.4
    type: number
    unit: percentunit
  - $$hashKey: object:1201
    alias: ''
    align: auto
    colorMode: cell
    colors:
    - rgba(50, 172, 45, 0.97)
    - rgba(237, 129, 40, 0.89)
    - rgba(245, 54, 54, 0.9)
    dateFormat: YYYY-MM-DD HH:mm:ss
    decimals: 2
    mappingType: 1
    pattern: MEM
    thresholds:
    - 0.6
    - 0.8
    type: number
    unit: percentunit
  - $$hashKey: object:1202
    alias: ''
    align: auto
    colorMode: cell
    colors:
    - rgba(50, 172, 45, 0.97)
    - rgba(237, 129, 40, 0.89)
    - rgba(245, 54, 54, 0.9)
    dateFormat: YYYY-MM-DD HH:mm:ss
    decimals: 2
    link: false
    mappingType: 1
    pattern: BALLOONING
    thresholds:
    - 0.3
    - 0.6
    type: number
    unit: percentunit
  - $$hashKey: object:1203
    alias: ''
    align: auto
    colorMode: cell
    colors:
    - rgba(50, 172, 45, 0.97)
    - rgba(237, 129, 40, 0.89)
    - rgba(245, 54, 54, 0.9)
    dateFormat: YYYY-MM-DD HH:mm:ss
    decimals: 2
    mappingType: 1
    pattern: SWAPPING
    thresholds:
    - 0.1
    - 0.25
    type: number
    unit: percentunit
  - $$hashKey: object:1204
    alias: ''
    align: auto
    colorMode: cell
    colors:
    - rgba(50, 172, 45, 0.97)
    - rgba(237, 129, 40, 0.89)
    - rgba(245, 54, 54, 0.9)
    dateFormat: YYYY-MM-DD HH:mm:ss
    decimals: 2
    mappingType: 1
    pattern: IO_THROUGHPUT
    thresholds:
    - 0.2
    - 0.4
    type: number
    unit: percentunit
  - $$hashKey: object:1205
    alias: ''
    align: auto
    colorMode: cell
    colors:
    - rgba(50, 172, 45, 0.97)
    - rgba(237, 129, 40, 0.89)
    - rgba(245, 54, 54, 0.9)
    dateFormat: YYYY-MM-DD HH:mm:ss
    decimals: 2
    mappingType: 1
    pattern: NET_THROUGHPUT
    thresholds:
    - 0.2
    - 0.4
    type: number
    unit: percentunit
  - $$hashKey: object:1206
    alias: ''
    align: auto
    colorMode: cell
    colors:
    - rgba(50, 172, 45, 0.97)
    - rgba(237, 129, 40, 0.89)
    - rgba(245, 54, 54, 0.9)
    dateFormat: YYYY-MM-DD HH:mm:ss
    decimals: 2
    mappingType: 1
    pattern: /Q.*_VCPU/
    thresholds:
    - 0.03
    - 0.1
    type: number
    unit: percentunit
  - $$hashKey: object:1207
    alias: ''
    align: right
    colorMode:
    colors:
    - rgba(245, 54, 54, 0.9)
    - rgba(237, 129, 40, 0.89)
    - rgba(50, 172, 45, 0.97)
    decimals: 2
    pattern: /.*/
    thresholds: []
    type: number
    unit: percentunit
  targets:
  - panelId: 2
    refId: A
  timeFrom:
  timeShift:
  title: Physical Machine Summary
  transform: timeseries_to_columns
  type: table-old
- aliasColors: {}
  bars: false
  dashLength: 10
  dashes: false
  datasource: $DB
  description: Average utilization for virtual machines over selected time period.
  fieldConfig:
    defaults:
      custom: {}
    overrides: []
  fill: 0
  fillGradient: 0
  gridPos:
    h: 11
    w: 12
    x: 0
    y: 25
  hiddenSeries: false
  id: 3
  legend:
    avg: false
    current: false
    max: false
    min: false
    show: true
    total: false
    values: false
  lines: true
  linewidth: 3
  nullPointMode: 'null'
  options:
    dataLinks: []
  percentage: false
  pointradius: 2
  points: false
  renderer: flot
  seriesOverrides: []
  spaceLength: 10
  stack: false
  steppedLine: false
  targets:
  - format: time_series
    group: []
    metricColumn: none
    rawQuery: true
    rawSql: |-
      select DATE(metric."time") as "time", metric."type" as metric, avg(utilization)
      from metric
      join entity e on
          metric.entity_oid = e.oid and
          e."type" = 'VIRTUAL_MACHINE' and
          e.environment = 'ON_PREM'
      where
          ($__timeFrom(),$__timeTo()) OVERLAPS (e.first_seen, e.last_seen)
          and provider_oid isnull
          and metric.time BETWEEN timestamptz $__timeFrom() AND $__timeTo()
      group by 1, 2
      order by 1
    refId: A
    select:
    - - params:
        - current
        type: column
    table: metric
    timeColumn: '"time"'
    timeColumnType: timestamp
    where:
    - name: $__timeFilter
      params: []
      type: macro
  thresholds: []
  timeFrom:
  timeRegions: []
  timeShift:
  title: Virtual Infrastructure Utilization Metrics
  tooltip:
    shared: true
    sort: 2
    value_type: individual
  type: graph
  xaxis:
    buckets:
    mode: time
    name:
    show: true
    values: []
  yaxes:
  - $$hashKey: object:317
    format: percentunit
    label:
    logBase: 1
    max:
    min:
    show: true
  - $$hashKey: object:318
    format: short
    label:
    logBase: 1
    max:
    min:
    show: true
  yaxis:
    align: false
    alignLevel:
- columns: []
  datasource: -- Dashboard --
  description: Daily average for virtual machines.
  fieldConfig:
    defaults:
      custom: {}
    overrides: []
  fontSize: 100%
  gridPos:
    h: 11
    w: 12
    x: 12
    y: 25
  id: 5
  pageSize:
  showHeader: true
  sort:
    col: 0
    desc: false
  styles:
  - $$hashKey: object:1426
    alias: Date
    align: ''
    dateFormat: YYYY-MM-DD
    pattern: Time
    type: date
  - $$hashKey: object:1427
    alias: ''
    align: ''
    colorMode: cell
    colors:
    - rgba(41, 168, 36, 0.97)
    - rgba(237, 129, 40, 0.89)
    - rgba(245, 54, 54, 0.9)
    dateFormat: YYYY-MM-DD HH:mm:ss
    decimals: 2
    mappingType: 1
    pattern: VCPU
    thresholds:
    - 0.2
    - 0.4
    type: number
    unit: percentunit
  - $$hashKey: object:1428
    alias: ''
    align: ''
    colorMode: cell
    colors:
    - rgba(50, 172, 45, 0.97)
    - rgba(237, 129, 40, 0.89)
    - rgba(245, 54, 54, 0.9)
    dateFormat: YYYY-MM-DD HH:mm:ss
    decimals: 2
    mappingType: 1
    pattern: VMEM
    thresholds:
    - 0.6
    - 0.8
    type: number
    unit: percentunit
  - $$hashKey: object:1429
    alias: ''
    align: ''
    colorMode:
    colors:
    - rgba(245, 54, 54, 0.9)
    - rgba(237, 129, 40, 0.89)
    - rgba(50, 172, 45, 0.97)
    dateFormat: YYYY-MM-DD HH:mm:ss
    decimals: 2
    mappingType: 1
    pattern: /.*/
    thresholds: []
    type: number
    unit: percentunit
  targets:
  - panelId: 3
    refId: A
  timeFrom:
  timeShift:
  title: Virtual Machine Summary
  transform: timeseries_to_columns
  type: table-old
refresh: false
schemaVersion: 25
style: dark
tags: []
templating:
  list:
  - hide: 2
    includeAll: false
    label:
    multi: false
    name: DB
    options: []
    query: postgres
    queryValue: ''
    refresh: 1
    regex: ''
    skipUrlSync: false
    type: datasource
time:
  from: now-7d
  to: now
timepicker:
  refresh_intervals:
  - 10s
  - 30s
  - 1m
  - 5m
  - 15m
  - 30m
  - 1h
  - 2h
  - 1d
timezone: ''
title: Daily Infrastructure Average Stats vs. Thresholds
uid: host_vm_stats_thresholds
