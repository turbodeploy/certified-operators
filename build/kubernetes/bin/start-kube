#!/bin/bash
#kubectl get storageclass
#kubectl patch storageclass fast -p '{"metadata": {"annotations":{"storageclass.kubernetes.io/is-default-class":"true"}}}'

# Install the complete XL application using helm
cd ~/git/xl/build/kubernetes/helm
helm dependency build xl
helm install xl --name xl-release --namespace turbonomic \
    --set-string global.repository=registry.turbonomic.com/turbonomic \
    --set-string global.tag=7.9.0-SNAPSHOT
helm upgrade xl-release xl --namespace turbonomic \
    --set-string global.repository=registry.turbonomic.com/turbonomic \
    --set-string global.tag=7.10.0-SNAPSHOT

# or install an individual component
#helm install base/rsyslog --name syslog-release --namespace turbonomic \
#    --set-string image.repository=registry.turbonomic.com/turbonomic \
#    --set-string image.tag=7.10.0-SNAPSHOT
