#!/bin/bash
#kubectl get storageclass
#kubectl patch storageclass fast -p '{"metadata": {"annotations":{"storageclass.kubernetes.io/is-default-class":"true"}}}'

# Install the complete XL application using helm
cd ~/git/xl/build/kubernetes/helm
helm dependency build xl

helm install xl --name xl-release --namespace turbonomic
#    --set imageCredentials.username=turbouser \
#    --set imageCredentials.password=turbopassword
# install with an optional registry and tag
#    --set-string global.repository=registry.turbonomic.com/turbonomic \
#    --set-string global.tag=7.9.0-SNAPSHOT
# install with an optional predefined external IP on-prem
#    --set-string global.externalIP=10.0.0.1
# install with debug ports of the components enabled
#    --set global.debug=true

helm upgrade xl-release xl --namespace turbonomic
# upgrade with an optional registry and tag
#    --set-string global.repository=registry.turbonomic.com/turbonomic \
#    --set-string global.tag=7.10.0-SNAPSHOT
# update with a optional predefined external IP on-prem
#    --set-string global.externalIP=10.0.0.1
# update with debug ports of the components enabled
#    --set global.debug=true

# or install an individual component
#helm install base/rsyslog --name syslog-release --namespace turbonomic \
#    --set-string image.repository=registry.turbonomic.com/turbonomic \
#    --set-string image.tag=7.10.0-SNAPSHOT
