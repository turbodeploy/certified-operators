{
    "variables": {
        "iso_name": "CentOS-7-x86_64-Minimal-1708.iso",
        "ssh_timeout": "20m"
    },
    "builders": [
        {
            "type": "vmware-iso",
            "guest_os_type": "centos-64",
            "headless": "false",
            "format": "ova",
            "output_directory": "turbonomic_xl",
            "iso_url": "http://mirrors.sonic.net/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1804.iso",
            "iso_checksum": "13675c6f74880e7ff3481b91bdaf925ce81bda8f",
            "iso_checksum_type": "sha1",
            "vm_name": "turbonomic_xl",
            "vmdk_name": "turbonomic_xl",
            "http_directory": "http",
            "boot_wait": "10s",
            "shutdown_command": "shutdown -h now",
            "floppy_files": [
                "http/ks.cfg"
            ],
            "boot_command": "<tab> text ks=hd:fd0:/ks.cfg <enter><wait>",
            "disk_size": 204800,
            "vmx_data": {
                "virtualHW.version": "9",
                "ethernet0.present": "true",
                "ethernet0.virtualDev": "e1000",
                "memsize": "16384",
                "numvcpus": "4",
                "cpuid.coresPerSocket": "1",
                "ide1:1.devicetype": "cdrom-image",
                "ide1:1.filename": "XL_ISO",
                "ide1:1.present": "true",
                "RemoteDisplay.vnc.enabled": "false"
            },
            "ssh_username": "root",
            "ssh_password": "vmturbo",
            "ssh_timeout": "3600s",
            "ssh_port": 22,
            "ssh_pty": true
        }
    ],
    "provisioners": [
        {
            "type": "file",
            "source": "initial_setup",
            "destination": "/root"
        },
        {
            "type": "file",
            "source": "binaries/netedit",
            "destination": "/opt/netedit"
        },
        {
            "type": "shell",
            "execute_command": "bash '{{ .Path }}'",
            "scripts": [
                "scripts/base.sh",
                "scripts/packages.sh",
                "scripts/vmware.sh",
                "scripts/docker.sh",
                "scripts/images.sh"
            ]
        },
        {
            "type": "file",
            "source": "../turboctl.py",
            "destination": "/etc/docker/turboctl.py"
        },
        {
            "type": "file",
            "source": "../turboupgrade.py",
            "destination": "/etc/docker/turboupgrade.py"
        },
        {
            "type": "file",
            "source": "../vmtctl",
            "destination": "/usr/local/bin/vmtctl"
        },
        {
            "type": "shell",
            "execute_command": "bash '{{ .Path }}'",
            "scripts": [
                "scripts/cleanup.sh"
            ]
        },
        {
            "type": "file",
            "source": "config/logrotate.d-syslog",
            "destination": "/etc/logrotate.d/syslog"
        }
    ]
}
