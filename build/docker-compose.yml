#
# DevelopmentVersion
#
# Docker Container Settings for Turbonomic XL 1.0.0 - for 15K Service Entities.
# A VM size of 16G is recommended.
#
version: '2'

networks:
  default:
    ipam:
      driver: default
      config:
      - subnet: 10.10.10.0/24
        gateway: 10.10.10.1

volumes:
  consuldata: &localdriver
    driver: local
  syslogdata: *localdriver
  syslogdata_rotate: *localdriver
  auditlogdata: *localdriver
  mysqldata: *localdriver
  mysql_var: *localdriver
  mysql_log: *localdriver
  influxdb: *localdriver
  influxdb-dump: *localdriver
  clustermgr: *localdriver
  api: *localdriver
  auth: *localdriver
  topology-processor: *localdriver
  reporting: *localdriver
  mediation-aws: *localdriver
  mediation-awsbilling: *localdriver
  mediation-awscloudbilling: *localdriver
  mediation-awscost: *localdriver
  mediation-azure: *localdriver
  mediation-azurecost: *localdriver
  kafka1-log: *localdriver
  zoo1-data: *localdriver
  nginx-data: *localdriver
  nginx-run: *localdriver
  nginx-home: *localdriver
  timescale-data: *localdriver
  grafana-data: *localdriver
  postgres-data: *localdriver

services:
  rsyslog:
    extends:
      file: common-services.yml
      service: common-service
    image: turbonomic/syslog:${XL_VERSION}
    ports:
      - "${RSYSLOG_PORT}"
    volumes:
      - syslogdata:/home/vmtsyslog
      - syslogdata_rotate:/var/lib/logrotate
      - auditlogdata:/var/log/turbonomic
    restart: always

  consul:
    extends:
      file: common-services.yml
      service: common-service
    image: turbonomic/com.vmturbo.consul:${XL_VERSION}
    command: ["vmt-server", "-client=0.0.0.0", "-ui"]
    environment:
      - CONSUL_BIND_INTERFACE=eth0
      - "constraint:node==/node-4/"
    networks:
      default:
        # choose an address high enough to avoid IPs for other components that docker will assign
        ipv4_address: 10.10.10.128
    ports:
      - "${CONSUL_PORT}"
    volumes:
      - consuldata:/consul/data
    restart: always
    mem_limit: 50M
    depends_on:
      - rsyslog
  db:
    extends:
      file: common-services.yml
      service: common-service
    image: turbonomic/db:${XL_VERSION}
    volumes:
      - mysqldata:/var/lib/mysql
      - mysql_log:/var/log
      - mysql_var:/var/run
    ports:
      - "${DB_PORT}"
    mem_limit: ${DB_MEM_LIMIT_BYTE}
    depends_on:
      - rsyslog

  zoo1:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/zookeeper:${XL_VERSION}
    restart: always
    mem_limit: ${ZOOKEEPER_MEM_LIMIT_BYTE}
    environment:
      ZOO_MY_ID: 1
      ZOO_SERVERS: zoo1
    volumes:
      - zoo1-data:/var/lib/zoo

  kafka1:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/kafka:${XL_VERSION}
    mem_limit: ${KAFKA_MEM_LIMIT_BYTE}
    environment:
      BROKER_ID: 1
      ZOOKEEPER_HOSTS: ${ZOOKEEPER_SERVERS}
      KAFKA_INTERNAL_PORT: ${KAFKA_INTERNAL_PORT}
      KAFKA_INTERNAL_BROKER_ADDRESS: ${KAFKA_INTERNAL_BROKER_ADDRESS}
      KAFKA_EXTERNAL_PORT: ${KAFKA_EXTERNAL_PORT}
      KAFKA_EXTERNAL_BROKER_ADDRESS: ${KAFKA_EXTERNAL_BROKER_ADDRESS}
      KAFKA_LOG_RETENTION_HRS: ${KAFKA_LOG_RETENTION_HRS}
      KAFKA_MAX_MESSAGE_BYTES: ${KAFKA_MAX_MESSAGE_BYTES}
    volumes:
      - kafka1-log:/home/kafka/data
    ports:
      # the external port mapping will have to be revisited for clustering, where external ports
      # would need to be unique per-host.
      - "${KAFKA_EXTERNAL_PORT}:${KAFKA_EXTERNAL_PORT}"
    depends_on:
      - rsyslog
      - zoo1

  jaeger:
    image: jaegertracing/all-in-one:1.18
    networks:
      default:
        aliases:
          - jaeger-collector
    ports:
      - 16686:16686
      - 14268:14268
    environment:
      SPAN_STORAGE_TYPE: memory
    command: --log-level=debug --memory.max-traces=10000

  auth:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/auth:${XL_VERSION}
    depends_on:
      - clustermgr
      - consul
      - db
    ports:
      - "${AUTH_PORT}"
      - "${AUTH_DEBUG_PORT}"
    environment:
      component_type: auth
      instance_id: auth-1
      kafkaServers: ${KAFKA_SERVERS}
      JAVA_COMPONENT_OPTS: "${AUTH_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${AUTH_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    volumes:
      - auth:/home/turbonomic/data
    mem_limit: ${AUTH_MEM_LIMIT_BYTE}

  clustermgr:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/com.vmturbo.clustermgr:${XL_VERSION}
    depends_on:
      - consul
      - rsyslog
      - kafka1
    ports:
      - "${CLUSTERMGR_PORT}"
      - "${CLUSTERMGR_DEBUG_PORT}"
    environment:
      component_type: clustermgr
      instance_id: clustermgr-1
      serverHttpPort: 8080
      JAVA_COMPONENT_OPTS: "${CLUSTERMGR_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${CLUSTERMGR_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      node_name: default
      consul_host: consul
      kafkaServers: ${KAFKA_SERVERS}
    volumes:
      - clustermgr:/home/turbonomic/data
    mem_limit: ${CLUSTERMGR_MEM_LIMIT_BYTE}

  api:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/com.vmturbo.api.component:${XL_VERSION}
    depends_on:
      - clustermgr
      - kafka1
      - nginx
      - db
    ports:
      - "${API_HTTP_PORT}"
      - "${API_DEBUG_PORT}"
    environment:
      component_type: api
      instance_id: api-1
      kafkaServers: ${KAFKA_SERVERS}
      JAVA_COMPONENT_OPTS: "${API_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${API_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    volumes:
      - api:/home/turbonomic/data
      - /tmp/certs:/tmp/certs
# customize this line to mount your ux development folder directly on the /www folder in the api
#      - /Users/...user.../...path-to-ux-app-folder.../ux-app/.tmp:/www:ro
    mem_limit: ${API_MEM_LIMIT_BYTE}

  nginx:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/nginx:${XL_VERSION}
    ports:
      - "${NGINX_HTTP_PORT}"
      - "${NGINX_HTTPS_PORT}"
    environment:
      API: api
      GRAFANA: grafana
      TOPOLOGY: topology-processor
      AUTH: auth
      HYDRA_PUBLIC: hydra-public
      DNS_RESOLVER: 127.0.0.11
    volumes:
      - /tmp/certs:/etc/nginx/certs
      - /tmp/load_status:/var/www/load_status
      - nginx-data:/var/cache/nginx
      - nginx-run:/var/run
      - nginx-home:/home/nginx

  market:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/market-component:${XL_VERSION}
    depends_on: &clustermgrdep
      - clustermgr
      - kafka1
    ports:
      - "${MARKET_PORT}"
      - "${MARKET_DEBUG_PORT}"
    environment:
      component_type: market
      instance_id: market-1
      kafkaServers: ${KAFKA_SERVERS}
      JAVA_COMPONENT_OPTS: "${MARKET_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MARKET_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MARKET_MEM_LIMIT_BYTE}

  action-orchestrator:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/action-orchestrator:${XL_VERSION}
    depends_on:
      - db
      - auth
      - clustermgr
      - kafka1
    ports:
      - "${ACTION_ORCHESTRATOR_PORT}"
      - "${ACTION_ORCHESTRATOR_DEBUG_PORT}"
    environment:
      component_type: action-orchestrator
      instance_id: action-orchestrator-1
      kafkaServers: ${KAFKA_SERVERS}
      JAVA_COMPONENT_OPTS: "${ACTION_ORCHESTRATOR_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${ACTION_ORCHESTRATOR_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${ACTION_ORCHESTRATOR_MEM_LIMIT_BYTE}

  topology-processor:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/topology-processor:${XL_VERSION}
    ports:
      - "${TOPOLOGY_PROCESSOR_PORT}"
      - "${TOPOLOGY_PROCESSOR_DEBUG_PORT}"
    depends_on:
      - db
      - clustermgr
      - kafka1
      - auth
    environment:
      component_type: topology-processor
      instance_id: topology-processor-1
      node_name: default
      kafkaServers: ${KAFKA_SERVERS}
      JAVA_COMPONENT_OPTS: "${TOPOLOGY_PROCESSOR_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${TOPOLOGY_PROCESSOR_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    volumes:
      - topology-processor:/home/turbonomic/data
    mem_limit: ${TOPOLOGY_PROCESSOR_MEM_LIMIT_BYTE}

  sample:
    extends:
      file: common-services.yml
      service: dev-component
    # The image, created by the docker-maven-plugin, has the
    # name turbonomic/<artifactId from pom>
    image: turbonomic/sample:${XL_VERSION}
    depends_on:
      - clustermgr
    # These are the ports that get exposed outside the container network.
    # The ports on the left-hand side should be globally unique.
    ports:
       # The values for these environment variables are in the XL/build/.env file.
       # See: https://docs.docker.com/compose/env-file/
       #
       # 8080 is the port for the HTTP server (defined in bootstrap.yml).
       # The left-hand side (8091) is the port on the host that will map to 8080.
       # So to access the HTTP server you will go to: <docker-host>:8091.
       - "${SAMPLE_PORT}"
       # 8000 is the debug port for the JVM. You will use the left-hand side port (20007) when
       # connecting to the container from a debugger/IDE.
       - "${SAMPLE_DEBUG_PORT}"
    environment:
      component_type: sample
      instance_id: sample-1
      JAVA_COMPONENT_OPTS: "${SAMPLE_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${SAMPLE_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"

  influxdb:
    extends:
      file: common-services.yml
      service: common-service
    image: turbonomic/influxdb:${XL_VERSION}
    environment:
      METRON_ENABLED: "${METRON_ENABLED}"
      LOG_TO_STDOUT: "true"
      # Uncomment to specify the dump interval for influx. Default is once per day if unspecified.
      # INFLUX_DUMP_INTERVAL_SECONDS: 300
    ports:
      - "${INFLUXDB_PORT}"
      - "${INFLUXDB_DUMP_PORT}"
    volumes:
      - influxdb:/var/lib/influxdb
      - influxdb-dump:/home/influxdb/influxdb-dump
    mem_limit: ${INFLUXDB_MEM_LIMIT_BYTE}

  ml-datastore:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/ml-datastore:${XL_VERSION}
    ports:
      - "${ML_DATASTORE_PORT}"
      - "${ML_DATASTORE_DEBUG_PORT}"
    depends_on:
      - influxdb
      - clustermgr
      - kafka1
      - auth
    environment:
      component_type: ml-datastore
      instance_id: ml-datastore-1
      kafkaServers: ${KAFKA_SERVERS}
      METRON_ENABLED: "${METRON_ENABLED}"
      JAVA_COMPONENT_OPTS: "${ML_DATASTORE_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${ML_DATASTORE_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${ML_DATASTORE_MEM_LIMIT_BYTE}

  repository:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/com.vmturbo.repository-component:${XL_VERSION}
    ports:
      - "${REPOSITORY_PORT}"
      - "${REPOSITORY_DEBUG_PORT}"
    depends_on:
      - clustermgr
      - kafka1
      - auth
    environment:
      component_type: repository
      instance_id: repository-1
      kafkaServers: ${KAFKA_SERVERS}
      JAVA_COMPONENT_OPTS: "${REPOSITORY_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${REPOSITORY_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${REPOSITORY_MEM_LIMIT_BYTE}

  group:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/com.vmturbo.group:${XL_VERSION}
    ports:
      - "${GROUP_PORT}"
      - "${GROUP_DEBUG_PORT}"
    depends_on:
      - clustermgr
      - db
      - auth
    environment:
      component_type: group
      instance_id: group-1
      logging.level.com.vmturbo.group: info # change to debug to enable more debugging output
      JAVA_COMPONENT_OPTS: "${GROUP_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${GROUP_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      kafkaServers: ${KAFKA_SERVERS}
    mem_limit: ${GROUP_MEM_LIMIT_BYTE}

  history:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/com.vmturbo.history:${XL_VERSION}
    ports:
      - "${HISTORY_PORT}"
      - "${HISTORY_DEBUG_PORT}"
    depends_on:
      - db
      - clustermgr
      - kafka1
      - auth
    environment:
      component_type: history
      instance_id: history-1
      logging.level.com.vmturbo.history: INFO
      kafkaServers: ${KAFKA_SERVERS}
      JAVA_COMPONENT_OPTS: "${HISTORY_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${HISTORY_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${HISTORY_MEM_LIMIT_BYTE}

  plan-orchestrator:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/com.vmturbo.plan.orchestrator:${XL_VERSION}
    ports:
      - "${PLAN_ORCHESTRATOR_PORT}"
      - "${PLAN_ORCHESTRATOR_DEBUG_PORT}"
    depends_on:
      - db
      - clustermgr
      - kafka1
      - auth
    environment:
      component_type: plan-orchestrator
      instance_id: plan-orchestrator-1
      kafkaServers: ${KAFKA_SERVERS}
      JAVA_COMPONENT_OPTS: "${PLAN_ORCHESTRATOR_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${PLAN_ORCHESTRATOR_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${PLAN_ORCHESTRATOR_MEM_LIMIT_BYTE}

  cost:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/com.vmturbo.cost.component:${XL_VERSION}
    ports:
      - "${COST_PORT}"
      - "${COST_DEBUG_PORT}"
    depends_on:
      - clustermgr
      - db
      - kafka1
      - auth
    environment:
      component_type: cost
      instance_id: cost-1
      logging.level.com.vmturbo.cost: info # change to debug to enable more debugging output
      JAVA_COMPONENT_OPTS: "${COST_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${COST_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      kafkaServers: ${KAFKA_SERVERS}
    mem_limit: ${COST_MEM_LIMIT_BYTE}

  extractor:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/extractor:${XL_VERSION}
    ports:
      - "${EXTRACTOR_PORT}"
      - "${EXTRACTOR_DEBUG_PORT}"
    depends_on:
      - timescaledb
      - db
      - kafka1
      - auth
    environment:
      # The grafanaDb.* fields should be in sync with the grafana definition below.
      grafanaDb.name: "grafana"
      grafanaDb.user: "grafana_backend"
      grafanaDb.password: "grafana"
      component_type: extractor
      instance_id: extractor-1
      logging.level.com.vmturbo.extractor: info # change to debug to enable more debugging output
      JAVA_COMPONENT_OPTS: "${EXTRACTOR_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${EXTRACTOR_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      kafkaServers: ${KAFKA_SERVERS}
    mem_limit: ${EXTRACTOR_MEM_LIMIT_BYTE}

  timescaledb:
    image: timescale/timescaledb:2.0.1-pg12
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: vmturbo
    volumes:
      - timescale-data:/var/lib/postresql/data
    ports:
      - ${TIMESCALE_PORT}
    mem_limit: ${TIMESCALE_MEM_LIMIT_BYTE}

  postgres:
    image: registry.turbonomic.com/turbonomic/postgres:1.0
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: vmturbo
    volumes:
      - postgres-data:/var/lib/postresql/data
    ports:
      - ${POSTGRES_PORT}
    mem_limit: ${POSTGRES_MEM_LIMIT_BYTE}

  grafana:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/grafana:${XL_VERSION}
    ports:
      - 3000:3000
    depends_on:
      - rsyslog
    volumes:
      - grafana-data:/var/lib/grafana
    environment:
      component_type: grafana
      instance_id: grafana-1
      GF_USERS_ALLOW_SIGN_UP: "true"
      GF_USERS_DEFAULT_THEME: "light"
      GF_USERS_AUTO_ASSIGN_ORG_ROLE: "Editor"
      GF_AUTH_PROXY_ENABLED: "true"
      GF_SERVER_ROOT_URL: "%(protocol)s://%(domain)s:%(http_port)s/reports"
      GF_SERVE_FROM_SUB_PATH: "true"
      # Uncomment the following five lines to store Grafana data in postgres.
      # Mainly for use when testing embedded reporting. The db name, user, and
      # password needs to be in sync with the extractor's environment variables abobe.
      #GF_DATABASE_TYPE: "postgres"
      #GF_DATABASE_HOST: "timescaledb"
      #GF_DATABASE_NAME: "grafana"
      #GF_DATABASE_USER: "grafana_backend"
      #GF_DATABASE_PASSWORD: "grafana"

  renderer:
    image: grafana/grafana-image-renderer:latest
    ports:
      - 8081:8081
    environment:
      ENABLE_METRICS: 'true'

  integration-intersight:
    extends:
      file: common-services.yml
      service: dev-component
    image: turbonomic/intersight-integration:${XL_VERSION}
    ports:
      - "${INTEGRATION_INTERSIGHT_PORT}"
      - "${INTEGRATION_INTERSIGHT_DEBUG_PORT}"
    depends_on:
      - clustermgr
      - kafka1
      - auth
      - topology-processor
    environment:
      component_type: integration-intersight
      instance_id: integration-intersight-1
      JAVA_COMPONENT_OPTS: "${INTEGRATION_INTERSIGHT_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${INTEGRATION_INTERSIGHT_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      kafkaServers: ${KAFKA_SERVERS}
    mem_limit: ${INTEGRATION_INTERSIGHT_MEM_LIMIT_BYTE}

  mediation-vcenter:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.vcenter.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_VCENTER_PORT}"
      - "${MEDIATION_VCENTER_DEBUG_PORT}"
    environment:
      component_type: mediation-vcenter
      instance_id: mediation-vcenter-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_VCENTER_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_VCENTER_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_VCENTER_MEM_LIMIT_BYTE}

  mediation-udt:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.udt.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_UDT_PORT}"
      - "${MEDIATION_UDT_DEBUG_PORT}"
    environment:
      component_type: mediation-udt
      instance_id: mediation-udt-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_UDT_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_UDT_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_UDT_MEM_LIMIT_BYTE}

  mediation-vcenter-browsing:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.vcenter.browsing.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_VCENTER_BROWSING_PORT}"
      - "${MEDIATION_VCENTER_BROWSING_DEBUG_PORT}"
    environment:
      component_type: mediation-vcenter-browsing
      instance_id: mediation-vcenter-browsing-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_VCENTER_BROWSING_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_VCENTER_BROWSING_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_VCENTER_BROWSING_MEM_LIMIT_BYTE}

  mediation-stressprobe:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.stressprobe.component:${XL_VERSION}
    ports:
      - "${MEDIATION_STRESSPROBE_PORT}"
      - "${MEDIATION_STRESSPROBE_DEBUG_PORT}"
    depends_on: *clustermgrdep
    environment:
      component_type: mediation-stressprobe
      instance_id: mediation-stressprobe-1
      serverHttpPort: 8080
      serverGrpcPort: 9001
      consul_host: consul
      consul_port: 8500
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_STRESSPROBE_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_STRESSPROBE_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      kvStoreTimeoutSeconds : 120
    mem_limit: ${MEDIATION_STRESSPROBE_MEM_LIMIT_BYTE}

  mediation-storagestressprobe:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.storagestressprobe.component:${XL_VERSION}
    ports:
      - "${MEDIATION_STORAGESTRESSPROBE_PORT}"
      - "${MEDIATION_STORAGESTRESSPROBE_DEBUG_PORT}"
    depends_on: *clustermgrdep
    environment:
      serverHttpPort: 8080
      serverGrpcPort: 9001
      consul_host: consul
      consul_port: 8500
      component_type: mediation-stressprobe
      instance_id: mediation-storagestressprobe-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_STORAGESTRESSPROBE_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_STORAGESTRESSPROBE_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      kvStoreTimeoutSeconds : 120
    mem_limit: ${MEDIATION_STORAGESTRESSPROBE_MEM_LIMIT_BYTE}

  mediation-delegatingprobe:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.delegatingprobe.component:${XL_VERSION}
    ports:
      - "${MEDIATION_DELEGATINGPROBE_PORT}"
      - "${MEDIATION_DELEGATINGPROBE_DEBUG_PORT}"
    depends_on: *clustermgrdep
    environment:
      component_type: mediation-delegatingprobe
      instance_id: mediation-delegatingprobe-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_DELEGATINGPROBE_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_DELEGATINGPROBE_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      kvStoreTimeoutSeconds : 120
    mem_limit: ${MEDIATION_DELEGATINGPROBE_MEM_LIMIT_BYTE}

  mediation-hyperv:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.hyperv.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_HYPERV_PORT}"
      - "${MEDIATION_HYPERV_DEBUG_PORT}"
    environment:
      component_type: mediation-hyperv
      instance_id: mediation-hyperv-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_HYPERV_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_HYPERV_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_HYPERV_MEM_LIMIT_BYTE}

  mediation-netapp:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.netapp.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_NETAPP_PORT}"
      - "${MEDIATION_NETAPP_DEBUG_PORT}"
    environment:
      component_type: mediation-netapp
      instance_id: mediation-netapp-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_NETAPP_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_NETAPP_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_NETAPP_MEM_LIMIT_BYTE}

  mediation-nutanix:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.nutanix.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_NUTANIX_PORT}"
      - "${MEDIATION_NUTANIX_DEBUG_PORT}"
    environment:
      component_type: mediation-nutanix
      instance_id: mediation-nutanix-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_NUTANIX_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_NUTANIX_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_NUTANIX_MEM_LIMIT_BYTE}

  mediation-ucs:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.ucs.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_UCS_PORT}"
      - "${MEDIATION_UCS_DEBUG_PORT}"
    environment:
      component_type: mediation-ucs
      instance_id: mediation-ucs-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_UCS_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_UCS_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_UCS_MEM_LIMIT_BYTE}

  mediation-vmax:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.vmax.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_VMAX_PORT}"
      - "${MEDIATION_VMAX_DEBUG_PORT}"
    environment:
      component_type: mediation-vmax
      instance_id: mediation-vmax-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_VMAX_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_VMAX_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_VMAX_MEM_LIMIT_BYTE}

  mediation-vmm:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.vmm.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_VMM_PORT}"
      - "${MEDIATION_VMM_DEBUG_PORT}"
    environment:
      component_type: mediation-vmm
      instance_id: mediation-vmm-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_VMM_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_VMM_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_VMM_MEM_LIMIT_BYTE}

  mediation-hpe3par:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.hpe3par.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_HPE3PAR_PORT}"
      - "${MEDIATION_HPE3PAR_DEBUG_PORT}"
    environment:
      component_type: mediation-hpe3par
      instance_id: mediation-hpe3par-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_HPE3PAR_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_HPE3PAR_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_HPE3PAR_MEM_LIMIT_BYTE}

  mediation-pure:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.pure.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_PURE_PORT}"
      - "${MEDIATION_PURE_DEBUG_PORT}"
    environment:
      component_type: mediation-pure
      instance_id: mediation-pure-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_PURE_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_PURE_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_PURE_MEM_LIMIT_BYTE}

  mediation-scaleio:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.scaleio.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_SCALEIO_PORT}"
      - "${MEDIATION_SCALEIO_DEBUG_PORT}"
    environment:
      component_type: mediation-scaleio
      instance_id: mediation-scaleio-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_SCALEIO_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_SCALEIO_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_SCALEIO_MEM_LIMIT_BYTE}

  mediation-servicenow:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.servicenow.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_SERVICENOW_PORT}"
      - "${MEDIATION_SERVICENOW_DEBUG_PORT}"
    environment:
      component_type: mediation-servicenow
      instance_id: mediation-servicenow-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_SERVICENOW_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_SERVICENOW_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_SERVICENOW_MEM_LIMIT_BYTE}

  mediation-hds:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.hds.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_HDS_PORT}"
      - "${MEDIATION_HDS_DEBUG_PORT}"
    environment:
      component_type: mediation-hds
      instance_id: mediation-hds-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_HDS_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_HDS_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_HDS_MEM_LIMIT_BYTE}

  mediation-compellent:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.compellent.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_COMPELLENT_PORT}"
      - "${MEDIATION_COMPELLENT_DEBUG_PORT}"
    environment:
      component_type: mediation-compellent
      instance_id: mediation-compellent-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_COMPELLENT_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_COMPELLENT_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_COMPELLENT_MEM_LIMIT_BYTE}

  mediation-xtremio:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.xtremio.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_XTREMIO_PORT}"
      - "${MEDIATION_XTREMIO_DEBUG_PORT}"
    environment:
      component_type: mediation-xtremio
      instance_id: mediation-xtremio-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_XTREMIO_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_XTREMIO_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_XTREMIO_MEM_LIMIT_BYTE}

  mediation-vplex:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.vplex.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_VPLEX_PORT}"
      - "${MEDIATION_VPLEX_DEBUG_PORT}"
    environment:
      component_type: mediation-vplex
      instance_id: mediation-vplex-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_VPLEX_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_VPLEX_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_VPLEX_MEM_LIMIT_BYTE}

  mediation-rhv:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.rhv.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_RHV_PORT}"
      - "${MEDIATION_RHV_DEBUG_PORT}"
    environment:
      component_type: mediation-rhv
      instance_id: mediation-rhv-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_RHV_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_RHV_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_RHV_MEM_LIMIT_BYTE}

  mediation-ucsdirector:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.ucsdirector.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_UCSDIRECTOR_PORT}"
      - "${MEDIATION_UCSDIRECTOR_DEBUG_PORT}"
    environment:
      component_type: mediation-ucsdirector
      instance_id: mediation-ucsdirector-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_UCSDIRECTOR_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_UCSDIRECTOR_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_UCSDIRECTOR_MEM_LIMIT_BYTE}

  mediation-aws:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.aws.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_AWS_PORT}"
      - "${MEDIATION_AWS_DEBUG_PORT}"
    environment:
      component_type: mediation-aws
      instance_id: mediation-aws-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_AWS_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_AWS_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    volumes:
      - mediation-aws:/home/turbonomic/data
    mem_limit: ${MEDIATION_AWS_MEM_LIMIT_BYTE}

  mediation-awsbilling:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.aws.billing.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_AWSBILLING_PORT}"
      - "${MEDIATION_AWSBILLING_DEBUG_PORT}"
    environment:
      component_type: mediation-awsbilling
      instance_id: mediation-awsbilling-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_AWSBILLING_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_AWSBILLING_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    volumes:
      - mediation-awsbilling:/home/turbonomic/data
    mem_limit: ${MEDIATION_AWSBILLING_MEM_LIMIT_BYTE}

  mediation-awscloudbilling:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.aws.cloudbilling.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_AWSCLOUDBILLING_PORT}"
      - "${MEDIATION_AWSCLOUDBILLING_DEBUG_PORT}"
    environment:
      component_type: mediation-awscloudbilling
      instance_id: mediation-awscloudbilling-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_AWSCLOUDBILLING_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_AWSCLOUDBILLING_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    volumes:
      - mediation-awscloudbilling:/home/turbonomic/data
    mem_limit: ${MEDIATION_AWSCLOUDBILLING_MEM_LIMIT_BYTE}

  mediation-awscost:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.aws.cost.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_AWSCOST_PORT}"
      - "${MEDIATION_AWSCOST_DEBUG_PORT}"
    environment:
      component_type: mediation-awscost
      instance_id: mediation-awscost-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_AWSCOST_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_AWSCOST_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    volumes:
      - mediation-awscost:/home/turbonomic/data
    mem_limit: ${MEDIATION_AWSCOST_MEM_LIMIT_BYTE}

  mediation-datadog:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.datadog.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_DATADOG_PORT}"
      - "${MEDIATION_DATADOG_DEBUG_PORT}"
    environment:
      component_type: mediation-datadog
      instance_id: mediation-datadog-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_DATADOG_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_DATADOG_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    mem_limit: ${MEDIATION_DATADOG_MEM_LIMIT_BYTE}

  mediation-azure:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.azure.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_AZURE_PORT}"
      - "${MEDIATION_AZURE_DEBUG_PORT}"
    environment:
      component_type: mediation-azure
      instance_id: mediation-azure-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_AZURE_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_AZURE_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    volumes:
      - mediation-azure:/home/turbonomic/data
    mem_limit: ${MEDIATION_AZURE_MEM_LIMIT_BYTE}

  mediation-azurecost:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.azure.cost.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_AZURECOST_PORT}"
      - "${MEDIATION_AZURECOST_DEBUG_PORT}"
    environment:
      component_type: mediation-azurecost
      instance_id: mediation-azurecost-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_AZURECOST_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_AZURECOST_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    volumes:
      - mediation-azurecost:/home/turbonomic/data
    mem_limit: ${MEDIATION_AZURECOST_MEM_LIMIT_BYTE}

  mediation-azureea:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.azure.ea.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_AZUREEA_PORT}"
      - "${MEDIATION_AZUREEA_DEBUG_PORT}"
    environment:
      component_type: mediation-azureea
      instance_id: mediation-azureea-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_AZUREEA_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_AZUREEA_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    mem_limit: ${MEDIATION_AZUREEA_MEM_LIMIT_BYTE}

  mediation-azurebilling:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.azure.billing.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_AZUREBILLING_PORT}"
      - "${MEDIATION_AZUREBILLING_DEBUG_PORT}"
    environment:
      component_type: mediation-azurebilling
      instance_id: mediation-azurebilling-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_AZUREBILLING_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_AZUREBILLING_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    mem_limit: ${MEDIATION_AZUREBILLING_MEM_LIMIT_BYTE}

  mediation-azuresp:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.azure.sp.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_AZURESP_PORT}"
      - "${MEDIATION_AZURESP_DEBUG_PORT}"
    environment:
      component_type: mediation-azuresp
      instance_id: mediation-azuresp-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_AZURESP_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_AZURESP_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    mem_limit: ${MEDIATION_AZURESP_MEM_LIMIT_BYTE}

  mediation-azure-volumes:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.azure.volumes.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_AZURE_VOLUMES_PORT}"
      - "${MEDIATION_AZURE_VOLUMES_DEBUG_PORT}"
    environment:
      component_type: mediation-azure-volumes
      instance_id: mediation-azure-volumes-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_AZURE_VOLUMES_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_AZURE_VOLUMES_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    mem_limit: ${MEDIATION_AZURE_VOLUMES_MEM_LIMIT_BYTE}

  mediation-gcpproject:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.gcp.project.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_GCPPROJECT_PORT}"
      - "${MEDIATION_GCPPROJECT_DEBUG_PORT}"
    environment:
      component_type: mediation-gcpproject
      instance_id: mediation-gcpproject-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_GCPPROJECT_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_GCPPROJECT_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    mem_limit: ${MEDIATION_GCPPROJECT_MEM_LIMIT_BYTE}

  mediation-gcpbilling:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.gcp.billing.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_GCPBILLING_PORT}"
      - "${MEDIATION_GCPBILLING_DEBUG_PORT}"
    environment:
      component_type: mediation-gcpbilling
      instance_id: mediation-gcpbilling-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_GCPBILLING_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_GCPBILLING_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
      # overriding the tmpdir location because the cloud probes download large files to temp, and we
      # don't want these to go to a memory-backed volume like /tmp
      MORE_JAVA_OPTS: -Djava.io.tmpdir=/home/turbonomic/data
    mem_limit: ${MEDIATION_GCPBILLING_MEM_LIMIT_BYTE}

  mediation-baremetal:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.baremetal.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_BAREMETAL_PORT}"
      - "${MEDIATION_BAREMETAL_DEBUG_PORT}"
    environment:
      component_type: mediation-baremetal
      instance_id: mediation-baremetal-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_ONEVIEW_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_ONEVIEW_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_BAREMETAL_MEM_LIMIT_BYTE}

  mediation-oneview:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.oneview.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_ONEVIEW_PORT}"
      - "${MEDIATION_ONEVIEW_DEBUG_PORT}"
    environment:
      component_type: mediation-oneview
      instance_id: mediation-oneview-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_ONEVIEW_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_ONEVIEW_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_ONEVIEW_MEM_LIMIT_BYTE}

  mediation-mssql:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.database.mssql.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_MSSQL_PORT}"
      - "${MEDIATION_MSSQL_DEBUG_PORT}"
    environment:
      component_type: mediation-mssql
      instance_id: mediation-mssql-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_MSSQL_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_MSSQL_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_MSSQL_MEM_LIMIT_BYTE}

  mediation-mysql:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.database.mysql.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_MYSQL_PORT}"
      - "${MEDIATION_MYSQL_DEBUG_PORT}"
    environment:
      component_type: mediation-mysql
      instance_id: mediation-mysql-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_MYSQL_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_MYSQL_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_MYSQL_MEM_LIMIT_BYTE}

  mediation-oracle:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.database.oracle.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_ORACLE_PORT}"
      - "${MEDIATION_ORACLE_DEBUG_PORT}"
    environment:
      component_type: mediation-oracle
      instance_id: mediation-oracle-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_ORACLE_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_ORACLE_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_ORACLE_MEM_LIMIT_BYTE}

  mediation-tomcat:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.tomcat.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_TOMCAT_PORT}"
      - "${MEDIATION_TOMCAT_DEBUG_PORT}"
    environment:
      component_type: mediation-tomcat
      instance_id: mediation-tomcat-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_TOMCAT_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_TOMCAT_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_TOMCAT_MEM_LIMIT_BYTE}

  mediation-webhook:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.webhook.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_WEBHOOK_PORT}"
      - "${MEDIATION_WEBHOOK_DEBUG_PORT}"
    environment:
      component_type: mediation-webhook
      instance_id: mediation-webhook-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_WEBHOOK_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_WEBHOOK_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_WEBHOOK_MEM_LIMIT_BYTE}

  mediation-websphere:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.websphere.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_WEBSPHERE_PORT}"
      - "${MEDIATION_WEBSPHERE_DEBUG_PORT}"
    environment:
      component_type: mediation-websphere
      instance_id: mediation-websphere-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_WEBSPHERE_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_WEBSPHERE_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_WEBSPHERE_MEM_LIMIT_BYTE}

  mediation-weblogic:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.weblogic.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
    - "${MEDIATION_WEBLOGIC_PORT}"
    - "${MEDIATION_WEBLOGIC_DEBUG_PORT}"
    environment:
      component_type: mediation-weblogic
      instance_id: mediation-weblogic-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_WEBLOGIC_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_WEBLOGIC_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_WEBLOGIC_MEM_LIMIT_BYTE}

  mediation-jboss:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.jboss.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
    - "${MEDIATION_JBOSS_PORT}"
    - "${MEDIATION_JBOSS_DEBUG_PORT}"
    environment:
      component_type: mediation-jboss
      instance_id: mediation-jboss-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_JBOSS_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_JBOSS_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_JBOSS_MEM_LIMIT_BYTE}

  mediation-instana:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.instana.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_INSTANA_PORT}"
      - "${MEDIATION_INSTANA_DEBUG_PORT}"
    environment:
      component_type: mediation-instana
      instance_id: mediation-instana-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_INSTANA_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_INSTANA_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_INSTANA_MEM_LIMIT_BYTE}

  mediation-jvm:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.jvm.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_JVM_PORT}"
      - "${MEDIATION_JVM_DEBUG_PORT}"
    environment:
      component_type: mediation-jvm
      instance_id: mediation-jvmt-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_JVM_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_JVM_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_JVM_MEM_LIMIT_BYTE}

  mediation-actionscript:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.actionscript.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_ACTIONSCRIPT_PORT}"
      - "${MEDIATION_ACTIONSCRIPT_DEBUG_PORT}"
    environment:
      component_type: mediation-actionscript
      instance_id: mediation-actionscript-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_ACTIONSCRIPT_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_ACTIONSCRIPT_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_ACTIONSCRIPT_MEM_LIMIT_BYTE}

  mediation-wmi:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.apm.wmi.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_WMI_PORT}"
      - "${MEDIATION_WMI_DEBUG_PORT}"
    environment:
      component_type: mediation-wmi
      instance_id: mediation-wmi-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_WMI_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_WMI_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_WMI_MEM_LIMIT_BYTE}

  mediation-snmp:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.apm.snmp.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_SNMP_PORT}"
      - "${MEDIATION_SNMP_DEBUG_PORT}"
    environment:
      component_type: mediation-snmp
      instance_id: mediation-snmp-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_SNMP_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_SNMP_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_SNMP_MEM_LIMIT_BYTE}

  mediation-appdynamics:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.appdynamics.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_APPDYNAMICS_PORT}"
      - "${MEDIATION_APPDYNAMICS_DEBUG_PORT}"
    environment:
      component_type: mediation-appdynamics
      instance_id: mediation-appdynamics-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_APPDYNAMICS_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_APPDYNAMICS_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_APPDYNAMICS_MEM_LIMIT_BYTE}

  mediation-newrelic:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.newrelic.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_NEWRELIC_PORT}"
      - "${MEDIATION_NEWRELIC_DEBUG_PORT}"
    environment:
      component_type: mediation-newrelic
      instance_id: mediation-newrelic-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_NEWRELIC_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_NEWRELIC_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_NEWRELIC_MEM_LIMIT_BYTE}

  mediation-appinsights:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.appinsights.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_APPINSIGHTS_PORT}"
      - "${MEDIATION_APPINSIGHTS_DEBUG_PORT}"
    environment:
      component_type: mediation-appinsights
      instance_id: mediation-appinsights-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_APPINSIGHTS_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_APPINSIGHTS_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_APPINSIGHTS_MEM_LIMIT_BYTE}

  mediation-dynatrace:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.dynatrace.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_DYNATRACE_PORT}"
      - "${MEDIATION_DYNATRACE_DEBUG_PORT}"
    environment:
      component_type: mediation-dynatrace
      instance_id: mediation-dynatrace-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_DYNATRACE_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_DYNATRACE_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_DYNATRACE_MEM_LIMIT_BYTE}

  mediation-hyperflex:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.hyperflex.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_HYPERFLEX_PORT}"
      - "${MEDIATION_HYPERFLEX_DEBUG_PORT}"
    environment:
      component_type: mediation-hyperflex
      instance_id: mediation-hyperflex-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_HYPERFLEX_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_HYPERFLEX_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_HYPERFLEX_MEM_LIMIT_BYTE}

  mediation-horizon:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.horizon.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
    - "${MEDIATION_HORIZON_PORT}"
    - "${MEDIATION_HORIZON_DEBUG_PORT}"
    environment:
      component_type: mediation-horizon
      instance_id: mediation-horizon-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_HORIZON_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_HORIZON_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_HORIZON_MEM_LIMIT_BYTE}

  mediation-intersight-hyperflex:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.intersight.hyperflex.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
    - "${MEDIATION_INTERSIGHT_HYPERFLEX_PORT}"
    - "${MEDIATION_INTERSIGHT_HYPERFLEX_DEBUG_PORT}"
    environment:
      component_type: mediation-intersight-hyperflex
      instance_id: mediation-intersight-hyperflex-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_INTERSIGHT_HYPERFLEX_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_INTERSIGHT_HYPERFLEX_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_INTERSIGHT_HYPERFLEX_MEM_LIMIT_BYTE}

  mediation-intersight-ucs:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.intersight.ucs.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
    - "${MEDIATION_INTERSIGHT_UCS_PORT}"
    - "${MEDIATION_INTERSIGHT_UCS_DEBUG_PORT}"
    environment:
      component_type: mediation-intersight-ucs
      instance_id: mediation-intersight-ucs-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_INTERSIGHT_UCS_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_INTERSIGHT_UCS_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_INTERSIGHT_UCS_MEM_LIMIT_BYTE}

  mediation-intersight-server:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.intersight.server.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
    - "${MEDIATION_INTERSIGHT_SERVER_PORT}"
    - "${MEDIATION_INTERSIGHT_SERVER_DEBUG_PORT}"
    environment:
      component_type: mediation-intersight-server
      instance_id: mediation-intersight-server-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_INTERSIGHT_SERVER_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_INTERSIGHT_SERVER_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_INTERSIGHT_SERVER_MEM_LIMIT_BYTE}

  mediation-actionstream-kafka:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.actionstream.kafka.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_ACTIONSTREAM_KAFKA_PORT}"
      - "${MEDIATION_ACTIONSTREAM_KAFKA_DEBUG_PORT}"
    environment:
      component_type: mediation-actionstream-kafka
      instance_id: mediation-actionstream-kafka-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_ACTIONSTREAM_KAFKA_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_ACTIONSTREAM_KAFKA_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_ACTIONSTREAM_KAFKA_MEM_LIMIT_BYTE}

  mediation-gcpsa:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.gcp.sa.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_GCPSA_PORT}"
      - "${MEDIATION_GCPSA_DEBUG_PORT}"
    environment:
      component_type: mediation-gcpsa
      instance_id: mediation-gcpsa-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_GCPSA_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_GCPSA_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_GCPSA_MEM_LIMIT_BYTE}

  mediation:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/mediation:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
    - "${MEDIATION_COMPONENT_PORT}"
    - "${MEDIATION_COMPONENT_DEBUG_PORT}"
    environment:
      component_type: mediation
      instance_id: mediation-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} -Xmx${MEDIATION_COMPONENT_XMX_BYTE} ${MEDIATION_COMPONENT_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_COMPONENT_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_COMPONENT_MEM_LIMIT_BYTE}

  mediation-xen:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.xen.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
    - "${MEDIATION_XEN_PORT}"
    - "${MEDIATION_XEN_DEBUG_PORT}"
    environment:
      component_type: mediation-xen
      instance_id: mediation-xen-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_XEN_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_XEN_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_XEN_MEM_LIMIT_BYTE}

  mediation-gcpcost:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.gcp.cost.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_GCPCOST_PORT}"
      - "${MEDIATION_GCPCOST_DEBUG_PORT}"
    environment:
      component_type: mediation-gcpcost
      instance_id: mediation-gcpcost-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_GCPCOST_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_GCPCOST_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_GCPCOST_MEM_LIMIT_BYTE}

  mediation-ibmstorage-flashsystem:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.ibmstorage.flashsystem.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_IBMSTORAGE_FLASHSYSTEM_PORT}"
      - "${MEDIATION_IBMSTORAGE_FLASHSYSTEM_DEBUG_PORT}"
    environment:
      component_type: mediation-ibmstorage-flashsystem
      instance_id: mediation-ibmstorage-flashsystem-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_IBMSTORAGE_FLASHSYSTEM_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_IBMSTORAGE_FLASHSYSTEM_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_IBMSTORAGE_FLASHSYSTEM_MEM_LIMIT_BYTE}

  mediation-flexera:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.flexera.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_FLEXERA_PORT}"
      - "${MEDIATION_FLEXERA_DEBUG_PORT}"
    environment:
      component_type: mediation-flexera
      instance_id: mediation-flexera-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_FLEXERA_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_FLEXERA_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_FLEXERA_MEM_LIMIT_BYTE}
    
  mediation-tanium:
    extends:
      file: common-services.yml
      service: dev-mediation-component
    image: turbonomic/com.vmturbo.mediation.tanium.component:${XL_VERSION}
    depends_on: *clustermgrdep
    ports:
      - "${MEDIATION_TANIUM_PORT}"
      - "${MEDIATION_TANIUM_DEBUG_PORT}"
    environment:
      component_type: mediation-tanium
      instance_id: mediation-tanium-1
      JAVA_COMPONENT_OPTS: "${JAVA_PROBE_OPTS} ${MEDIATION_TANIUM_SYSTEM_PROPERTIES}"
      JAVA_BASE_OPTS: "${JAVA_BASE_OPTS}"
      JAVA_DEBUG: "${MEDIATION_TANIUM_DEBUG}${DEBUG_ALL}"
      JAVA_DEBUG_OPTS: "${JAVA_DEBUG_OPTS}"
      JAVA_ENV_OPTS: "${JAVA_ENV_OPTS}"
      JAVA_CACHE_OPTS: "${JAVA_CACHE_OPTS}"
      JAVA_OPTS: "${ALL_JAVA_OPTS}"
      JVM_TYPE: "${JVM_TYPE}"
    mem_limit: ${MEDIATION_TANIUM_MEM_LIMIT_BYTE}

